#!/bin/bash
if (( $# < 3));
then
	echo "Usage: parse <scalar file> <output file> <number of Rx devices>"
	exit
fi


file=$1
target=$2
numRx=$3

if [ -f $target ]; then
	rm $target
fi
touch $target

for (( i=0; i<$numRx; i+=1 )); do
	grep -e "^scalar FrequencyNetwork.ueD2DRx\[$i\].udpApp\[0\][[:space:]]\{1,\}rcvdPk:sum(packetBytes)[[:space:]]\{1,\}" $file  | awk '{print $4}' >> $target
done
